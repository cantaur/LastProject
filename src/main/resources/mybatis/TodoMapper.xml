<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.pium.mapper.TodoMapper">
    <!--상태 10의 노트 조회-->
    <select id="selectNoteTo" resultType="TodoDTO" parameterType="String">
        SELECT * FROM todo WHERE todo_status = '10' AND projmember_seq = #{projmember_seq}
    </select>
    <!--상태 20의 노트 조회-->
    <select id="selectNoteDo" resultType="TodoDTO" parameterType="String">
        SELECT * FROM todo WHERE todo_status = '20' AND projmember_seq = #{projmember_seq}
    </select>
    <!--상태 30의 노트 조회-->
    <select id="selectNoteDo" resultType="TodoDTO" parameterType="String">
        SELECT * FROM todo WHERE todo_status = '30' AND projmember_seq = #{projmember_seq}
    </select>
    <!--노트 생성 초기위치 to-do-->
    <insert id="insertNote" parameterType="long">
        insert into todo(
            todo_name,
            todo_content,
            todo_date,
            todo_status,
            task_seq,
            projmember_seq
        )
        values(
            #{todo_name},
            #{todo_content},
            NOW(),
            '10',
            #{task_seq},
            #{projmember_seq}
        )
    </insert>
    <!--노트 수정-->
    <update id="updateNote" parameterType="TodoDTO">
        UPDATE todo SET todo_name = #{todo_name}, todo_content = #{todo_content}, todo_date = NOW() WHERE todo_seq = #{todo_seq}
    </update>
    <!--노트 상태이동-->
    <update id="updateNote" parameterType="long">
        UPDATE todo SET todo_status = #{todo_status} WHERE #{todo_seq}
    </update>
    <!--노트 삭제-->
    <delete id="deleteNote" parameterType="long">
        DELETE FROM todo WHERE todo_seq = #{todo_seq}
    </delete>


</mapper>